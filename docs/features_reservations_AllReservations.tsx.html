<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>features/reservations/AllReservations.tsx - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AuthenticationService.html">AuthenticationService</a></li><li><a href="CartService.html">CartService</a></li><li><a href="EventService.html">EventService</a></li><li><a href="LocalCartService.html">LocalCartService</a></li><li><a href="ReservationService.html">ReservationService</a></li><li><a href="TransactionService.html">TransactionService</a></li><li><a href="UserService.html">UserService</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AddItemEventToCart">AddItemEventToCart</a></li><li><a href="global.html#AdminRoute">AdminRoute</a></li><li><a href="global.html#AlertDestructive">AlertDestructive</a></li><li><a href="global.html#AlertDialogAddEvent">AlertDialogAddEvent</a></li><li><a href="global.html#AllReservations">AllReservations</a></li><li><a href="global.html#App">App</a></li><li><a href="global.html#AuthPage">AuthPage</a></li><li><a href="global.html#AuthProvider">AuthProvider</a></li><li><a href="global.html#BaseCategoryEvent">BaseCategoryEvent</a></li><li><a href="global.html#ButtonAddEvent">ButtonAddEvent</a></li><li><a href="global.html#ButtonBack">ButtonBack</a></li><li><a href="global.html#ButtonCheckoutPayment">ButtonCheckoutPayment</a></li><li><a href="global.html#CardAccount">CardAccount</a></li><li><a href="global.html#CardChangePassword">CardChangePassword</a></li><li><a href="global.html#CardFormule">CardFormule</a></li><li><a href="global.html#CardNotification">CardNotification</a></li><li><a href="global.html#CardOneTicket">CardOneTicket</a></li><li><a href="global.html#CardPaymentCheckout">CardPaymentCheckout</a></li><li><a href="global.html#CardProfile">CardProfile</a></li><li><a href="global.html#CardPromoCode">CardPromoCode</a></li><li><a href="global.html#CardReservations">CardReservations</a></li><li><a href="global.html#CardSecurity">CardSecurity</a></li><li><a href="global.html#CartNotLogging">CartNotLogging</a></li><li><a href="global.html#CartPopoverPreview">CartPopoverPreview</a></li><li><a href="global.html#CheckoutEmpty">CheckoutEmpty</a></li><li><a href="global.html#CheckoutPage">CheckoutPage</a></li><li><a href="global.html#CheckoutSummary">CheckoutSummary</a></li><li><a href="global.html#DashboardPage">DashboardPage</a></li><li><a href="global.html#DescriptionCollapsible">DescriptionCollapsible</a></li><li><a href="global.html#DropDownAccount">DropDownAccount</a></li><li><a href="global.html#EditEventSidebar">EditEventSidebar</a></li><li><a href="global.html#EventCard">EventCard</a></li><li><a href="global.html#EventHero">EventHero</a></li><li><a href="global.html#EventSelectedPage">EventSelectedPage</a></li><li><a href="global.html#EventsDashboard">EventsDashboard</a></li><li><a href="global.html#EventsMainContent">EventsMainContent</a></li><li><a href="global.html#EventsPage">EventsPage</a></li><li><a href="global.html#ExploreVenue">ExploreVenue</a></li><li><a href="global.html#FILTERS_EVENT">FILTERS_EVENT</a></li><li><a href="global.html#FILTER_OPTIONS_TRANSACTIONS">FILTER_OPTIONS_TRANSACTIONS</a></li><li><a href="global.html#FILTER_USERS_DASHBOARD">FILTER_USERS_DASHBOARD</a></li><li><a href="global.html#FilterBarDashboard">FilterBarDashboard</a></li><li><a href="global.html#FilterDropdown">FilterDropdown</a></li><li><a href="global.html#Footer">Footer</a></li><li><a href="global.html#FormAddNewEvent">FormAddNewEvent</a></li><li><a href="global.html#GenericAlertDialog">GenericAlertDialog</a></li><li><a href="global.html#GenericTitle">GenericTitle</a></li><li><a href="global.html#GroupedCartItems">GroupedCartItems</a></li><li><a href="global.html#Header">Header</a></li><li><a href="global.html#HeaderCardInfoDashboard">HeaderCardInfoDashboard</a></li><li><a href="global.html#Hero">Hero</a></li><li><a href="global.html#HeroProfile">HeroProfile</a></li><li><a href="global.html#HeroReservation">HeroReservation</a></li><li><a href="global.html#Highlights">Highlights</a></li><li><a href="global.html#HomePage">HomePage</a></li><li><a href="global.html#ImagesCoverEvent">ImagesCoverEvent</a></li><li><a href="global.html#InputFieldEvent">InputFieldEvent</a></li><li><a href="global.html#LoadingPage">LoadingPage</a></li><li><a href="global.html#LoginForm">LoginForm</a></li><li><a href="global.html#NavBar">NavBar</a></li><li><a href="global.html#NewsPresents">NewsPresents</a></li><li><a href="global.html#NotFoundPage">NotFoundPage</a></li><li><a href="global.html#OverviewOneEvent">OverviewOneEvent</a></li><li><a href="global.html#PaginationComponent">PaginationComponent</a></li><li><a href="global.html#PriceFormula">PriceFormula</a></li><li><a href="global.html#ProfilePage">ProfilePage</a></li><li><a href="global.html#ProtectedRoute">ProtectedRoute</a></li><li><a href="global.html#QuantitySelector">QuantitySelector</a></li><li><a href="global.html#ReservationEmpty">ReservationEmpty</a></li><li><a href="global.html#ReservationPage">ReservationPage</a></li><li><a href="global.html#ReturnButton">ReturnButton</a></li><li><a href="global.html#SORTING_EVENTS_DASHBOARD">SORTING_EVENTS_DASHBOARD</a></li><li><a href="global.html#SORTING_EVENTS_PUBLIC">SORTING_EVENTS_PUBLIC</a></li><li><a href="global.html#SORTING_OPTIONS_TRANSACTIONS">SORTING_OPTIONS_TRANSACTIONS</a></li><li><a href="global.html#SORTING_RESERVATION_PUBLIC">SORTING_RESERVATION_PUBLIC</a></li><li><a href="global.html#SORTING_USERS_DASHBOARD">SORTING_USERS_DASHBOARD</a></li><li><a href="global.html#SectionTickets">SectionTickets</a></li><li><a href="global.html#SelectEventTypes">SelectEventTypes</a></li><li><a href="global.html#SideBarDesktop">SideBarDesktop</a></li><li><a href="global.html#SideBarMenu">SideBarMenu</a></li><li><a href="global.html#SignUpForm">SignUpForm</a></li><li><a href="global.html#SkeletonCard">SkeletonCard</a></li><li><a href="global.html#SkeletonCheckoutPage">SkeletonCheckoutPage</a></li><li><a href="global.html#SkeletonCheckoutSummary">SkeletonCheckoutSummary</a></li><li><a href="global.html#SortByDropdown">SortByDropdown</a></li><li><a href="global.html#SortOrderDropdown">SortOrderDropdown</a></li><li><a href="global.html#StatusPayment">StatusPayment</a></li><li><a href="global.html#StatusPaymentEnum">StatusPaymentEnum</a></li><li><a href="global.html#SuccessAccountConnexion">SuccessAccountConnexion</a></li><li><a href="global.html#SuccessAccountCreation">SuccessAccountCreation</a></li><li><a href="global.html#SuccessAccountDeleted">SuccessAccountDeleted</a></li><li><a href="global.html#TableGenericData">TableGenericData</a></li><li><a href="global.html#TicketModal">TicketModal</a></li><li><a href="global.html#TotalEventTicketPerFormula">TotalEventTicketPerFormula</a></li><li><a href="global.html#UserRole">UserRole</a></li><li><a href="global.html#UsersDashboard">UsersDashboard</a></li><li><a href="global.html#accessProtectedRoute">accessProtectedRoute</a></li><li><a href="global.html#addEvent">addEvent</a></li><li><a href="global.html#addItemToCart">addItemToCart</a></li><li><a href="global.html#addItemToCartLocal">addItemToCartLocal</a></li><li><a href="global.html#addReservation">addReservation</a></li><li><a href="global.html#axiosClient">axiosClient</a></li><li><a href="global.html#cardDataEvents">cardDataEvents</a></li><li><a href="global.html#cardDataUsers">cardDataUsers</a></li><li><a href="global.html#catchTicket">catchTicket</a></li><li><a href="global.html#changePassword">changePassword</a></li><li><a href="global.html#changePasswordSchema">changePasswordSchema</a></li><li><a href="global.html#clearCart">clearCart</a></li><li><a href="global.html#clearCartItemsLocal">clearCartItemsLocal</a></li><li><a href="global.html#clearCartLocal">clearCartLocal</a></li><li><a href="global.html#cn">cn</a></li><li><a href="global.html#contactFormSchema">contactFormSchema</a></li><li><a href="global.html#debounce">debounce</a></li><li><a href="global.html#deleteEvent">deleteEvent</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#eventColumnsTable">eventColumnsTable</a></li><li><a href="global.html#eventSchema">eventSchema</a></li><li><a href="global.html#fetchAllDataReservations">fetchAllDataReservations</a></li><li><a href="global.html#fetchAllUsersFiltered">fetchAllUsersFiltered</a></li><li><a href="global.html#fetchAllUsersValues">fetchAllUsersValues</a></li><li><a href="global.html#fetchCartItems">fetchCartItems</a></li><li><a href="global.html#fetchEvents">fetchEvents</a></li><li><a href="global.html#fetchReservations">fetchReservations</a></li><li><a href="global.html#fetchTransactions">fetchTransactions</a></li><li><a href="global.html#fetchUserById">fetchUserById</a></li><li><a href="global.html#fetchValues">fetchValues</a></li><li><a href="global.html#filterProperties">filterProperties</a></li><li><a href="global.html#getEvent">getEvent</a></li><li><a href="global.html#getTicketPrice">getTicketPrice</a></li><li><a href="global.html#handleAsyncError">handleAsyncError</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#loginSchema">loginSchema</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#makeInactive">makeInactive</a></li><li><a href="global.html#nameSchema">nameSchema</a></li><li><a href="global.html#passwordSchema">passwordSchema</a></li><li><a href="global.html#profileSchema">profileSchema</a></li><li><a href="global.html#refreshToken">refreshToken</a></li><li><a href="global.html#removeCartItem">removeCartItem</a></li><li><a href="global.html#removeCartItemLocal">removeCartItemLocal</a></li><li><a href="global.html#signup">signup</a></li><li><a href="global.html#signupSchema">signupSchema</a></li><li><a href="global.html#syncCartItems">syncCartItems</a></li><li><a href="global.html#updateCartItem">updateCartItem</a></li><li><a href="global.html#updateCartItemLocal">updateCartItemLocal</a></li><li><a href="global.html#updateEvent">updateEvent</a></li><li><a href="global.html#updateUser">updateUser</a></li><li><a href="global.html#useAggregateEventData">useAggregateEventData</a></li><li><a href="global.html#useAggregateUsersData">useAggregateUsersData</a></li><li><a href="global.html#useAuthStore">useAuthStore</a></li><li><a href="global.html#useCartStore">useCartStore</a></li><li><a href="global.html#useContactForm">useContactForm</a></li><li><a href="global.html#useDelConfirmation">useDelConfirmation</a></li><li><a href="global.html#useDisplayTotalCommands">useDisplayTotalCommands</a></li><li><a href="global.html#useDisplayTotalItems">useDisplayTotalItems</a></li><li><a href="global.html#useEventForm">useEventForm</a></li><li><a href="global.html#useEventStore">useEventStore</a></li><li><a href="global.html#useFilter">useFilter</a></li><li><a href="global.html#useFormattedDates">useFormattedDates</a></li><li><a href="global.html#useGroupByTicketType">useGroupByTicketType</a></li><li><a href="global.html#useGroupByTitle">useGroupByTitle</a></li><li><a href="global.html#useLocalCartStore">useLocalCartStore</a></li><li><a href="global.html#usePagination">usePagination</a></li><li><a href="global.html#usePaginationRange">usePaginationRange</a></li><li><a href="global.html#useReducePrice">useReducePrice</a></li><li><a href="global.html#useReservationStore">useReservationStore</a></li><li><a href="global.html#useSidebarForm">useSidebarForm</a></li><li><a href="global.html#useTakeQuantityFromLocal">useTakeQuantityFromLocal</a></li><li><a href="global.html#useTakeQuantityFromServer">useTakeQuantityFromServer</a></li><li><a href="global.html#useTicketManager">useTicketManager</a></li><li><a href="global.html#useTransactionStore">useTransactionStore</a></li><li><a href="global.html#useUserInitials">useUserInitials</a></li><li><a href="global.html#useUserStore">useUserStore</a></li><li><a href="global.html#usersColumnsTable">usersColumnsTable</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">features/reservations/AllReservations.tsx</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useEffect } from 'react';
import { useAuthStore } from '@/stores/useAuthStore';
import { useFilter, usePagination } from '@/hooks';
import { PaginationComponent } from '@/components/pagination/PaginationComponent';
import { ReservationEmpty } from '@/components/empty/ReservationEmpty';
import { Separator } from '@/components/ui/separator';
import { CardReservations } from './CardReservations';
import { FilterDropdown } from '../filter-sorting/FilterDropdown';
import { SortOrderDropdown } from '../filter-sorting/SortOrderDropdown';
import { SortByDropdown } from '../filter-sorting/SortByDropdown';
import { useTransactionStore } from '@/stores/useTransactionStore';
import { FaCalendarAlt, FaEuroSign, FaReceipt } from 'react-icons/fa';
import { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';
import { ChevronRightIcon } from '@/components/ui/IconComponents';
import { Reservation } from '@/config/interfaces/reservation/reservation-type.interface';
import { STATUSCOLOR } from '@/config/constants/constants-common';
import { FILTER_OPTIONS_TRANSACTIONS } from '@/config/constants/filters/filtersTransactions';
import { SORTING_OPTIONS_TRANSACTIONS } from '@/config/constants/sorting/sortingTransactions';

/**
 * `AllReservations` component displays a list of reservations with pagination, filtering, and sorting options.
 * It fetches transaction data and renders each transaction along with its details.
 *
 * @component
 * @returns {JSX.Element} The rendered AllReservations component.
 *
 * @example
 * return &lt;AllReservations />;
 *
 * @remarks
 * The component uses Tailwind CSS for styling and relies on several custom components and hooks:
 * - `useAuthStore` and `useTransactionStore` for state management.
 * - `useFilter` and `usePagination` for filtering and pagination logic.
 * - `PaginationComponent`, `ReservationEmpty`, `Separator`, `CardReservations`, `FilterDropdown`, `SortOrderDropdown`, `SortByDropdown`, `Collapsible`, `CollapsibleContent`, `CollapsibleTrigger` for UI components.
 */
export const AllReservations = (): JSX.Element => {
  const { transactions, fetchTransactions, total } = useTransactionStore();
  const { userId } = useAuthStore();
  const { currentPage, setPage, limit, totalPages, offset } = usePagination({
    initialPage: 1,
    initialLimit: 5,
    totalCount: total
  });

  const { sortBy, setSortBy, sortOrder, setSortOrder, filterBy, filterValue, setFilterValue } =
    useFilter('createdAt', 'DESC', 'statusPayment', 'ALL');

  useEffect(() => {
    setPage(1); // Reset to the first page whenever filters or sorting change
  }, [setPage, sortBy, sortOrder, filterBy, filterValue]);

  useEffect(() => {
    if (userId) {
      fetchTransactions(userId, { limit, offset, sortBy, sortOrder, filterBy, filterValue });
    }
  }, [
    currentPage,
    fetchTransactions,
    userId,
    limit,
    offset,
    sortBy,
    sortOrder,
    filterBy,
    filterValue
  ]);

  useEffect(() => {
    setPage(1); // Reset to the first page whenever filters or sorting change
  }, [setPage]);

  return (
    &lt;>
      {/* Filter and Sort Options Section */}
      &lt;section className="p-10">
        &lt;div className="flex items-center space-x-4">
          &lt;SortByDropdown
            sortBy={sortBy}
            onSortChange={setSortBy}
            options={SORTING_OPTIONS_TRANSACTIONS}
          />
          &lt;SortOrderDropdown sortOrder={sortOrder} setSortOrder={setSortOrder} />
          &lt;FilterDropdown
            groups={FILTER_OPTIONS_TRANSACTIONS}
            filterValue={filterValue}
            onChange={setFilterValue}
          />
        &lt;/div>
      &lt;/section>
      &lt;div className="px-4 space-y-8">
        {transactions.length > 0 ? (
          transactions.map(transaction => (
            &lt;div key={transaction.transactionId} className="mb-6">
              {/* Transaction Header */}
              &lt;div className="mb-4 flex flex-row justify-between items-center">
                &lt;h3 className="text-2xl font-bold flex items-center">
                  &lt;FaReceipt className="mr-2 text-rose-600" /> Transaction #
                  {transaction.transactionId}
                &lt;/h3>
                &lt;div
                  className={`px-3 py-1 rounded-md border text-md font-semibold ${STATUSCOLOR[transaction.statusPayment]}`}
                >
                  {transaction.statusPayment}
                &lt;/div>
              &lt;/div>
              {/* Transaction Details */}
              &lt;div className="px-3">
                &lt;div className="text-md font-semibold flex items-center mb-2">
                  &lt;FaCalendarAlt className="mr-2 text-gray-600" />
                  Date d'achat:
                  &lt;span className="text-sm text-gray-500 ml-1">{transaction.createdAt}&lt;/span>
                &lt;/div>
                &lt;div className="text-md font-semibold flex items-center mb-4">
                  &lt;FaEuroSign className="mr-2 text-gray-600" />
                  Montant total:
                  &lt;span className="text-sm text-gray-500 ml-1">{transaction.totalAmount}€&lt;/span>
                &lt;/div>
              &lt;/div>
              {/* Collapsible Reservation Details */}
              &lt;Collapsible>
                &lt;CollapsibleTrigger className="font-semibold flex items-center gap-1 transition-transform duration-300 ease-in-out [&amp;[data-state=open]>svg]:rotate-90">
                  Voir plus
                  &lt;ChevronRightIcon className="w-4 h-4 translate-y-px transition-transform duration-300 ease-in-out" />
                &lt;/CollapsibleTrigger>
                &lt;CollapsibleContent className="transition-opacity duration-300 ease-in-out">
                  &lt;div className="rounded-lg overflow-hidden py-8">
                    &lt;div className="px-2 pb-4 grid gap-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-5">
                      {transaction.reservation.map((reservation: Reservation) => (
                        &lt;CardReservations
                          key={reservation.reservationId}
                          reservation={reservation}
                          statusPayment={transaction.statusPayment}
                        />
                      ))}
                    &lt;/div>
                  &lt;/div>
                &lt;/CollapsibleContent>
              &lt;/Collapsible>
              &lt;Separator className="my-6" />
            &lt;/div>
          ))
        ) : (
          &lt;ReservationEmpty />
        )}
      &lt;/div>
      &lt;PaginationComponent
        currentPage={currentPage}
        totalPages={totalPages}
        onPageChange={setPage}
      />
    &lt;/>
  );
};
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
